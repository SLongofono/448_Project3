<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>EECS 448 Project: Assemble_Profile.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EECS 448 Project
   &#160;<span id="projectnumber">4-Final</span>
   </div>
   <div id="projectbrief">Spotify Recommendation System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Assemble_Profile.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Assemble Profile script.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a189b709c076ae0e129e145c9ca48c580"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#a189b709c076ae0e129e145c9ca48c580">Assemble_Profile.dumpSongVectors</a> (vectors)</td></tr>
<tr class="memdesc:a189b709c076ae0e129e145c9ca48c580"><td class="mdescLeft">&#160;</td><td class="mdescRight">dumpSongVectors  <a href="Assemble__Profile_8py.html#a189b709c076ae0e129e145c9ca48c580">More...</a><br /></td></tr>
<tr class="separator:a189b709c076ae0e129e145c9ca48c580"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a441728fc886e5c5e0fbfabf53fd66bb8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#a441728fc886e5c5e0fbfabf53fd66bb8">Assemble_Profile.getSongFeatures</a> (sp, ids)</td></tr>
<tr class="memdesc:a441728fc886e5c5e0fbfabf53fd66bb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">getSongFeatures  <a href="Assemble__Profile_8py.html#a441728fc886e5c5e0fbfabf53fd66bb8">More...</a><br /></td></tr>
<tr class="separator:a441728fc886e5c5e0fbfabf53fd66bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa603b181c1cddf1b3f8c2b39a1c150"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#a9fa603b181c1cddf1b3f8c2b39a1c150">Assemble_Profile.getTracksUserAccount</a> (sp, limit=20, index=0)</td></tr>
<tr class="memdesc:a9fa603b181c1cddf1b3f8c2b39a1c150"><td class="mdescLeft">&#160;</td><td class="mdescRight">getTracksUserAccount  <a href="Assemble__Profile_8py.html#a9fa603b181c1cddf1b3f8c2b39a1c150">More...</a><br /></td></tr>
<tr class="separator:a9fa603b181c1cddf1b3f8c2b39a1c150"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9121f3a5f7834af381ce54c15e13926"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#af9121f3a5f7834af381ce54c15e13926">Assemble_Profile.getUserSongVectors</a> (user, numCalls=50, numEntries=20)</td></tr>
<tr class="memdesc:af9121f3a5f7834af381ce54c15e13926"><td class="mdescLeft">&#160;</td><td class="mdescRight">getUserSongVectors  <a href="Assemble__Profile_8py.html#af9121f3a5f7834af381ce54c15e13926">More...</a><br /></td></tr>
<tr class="separator:af9121f3a5f7834af381ce54c15e13926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae387154dbf34f669b9a17893f7348890"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#ae387154dbf34f669b9a17893f7348890">Assemble_Profile.getVectorFromTrack</a> (sp, features, artists)</td></tr>
<tr class="memdesc:ae387154dbf34f669b9a17893f7348890"><td class="mdescLeft">&#160;</td><td class="mdescRight">getVectorFromTrack  <a href="Assemble__Profile_8py.html#ae387154dbf34f669b9a17893f7348890">More...</a><br /></td></tr>
<tr class="separator:ae387154dbf34f669b9a17893f7348890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9107dfd232e682ef1a23674d2c82945"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#af9107dfd232e682ef1a23674d2c82945">Assemble_Profile.insertMultiple</a> (table, keys, vals)</td></tr>
<tr class="memdesc:af9107dfd232e682ef1a23674d2c82945"><td class="mdescLeft">&#160;</td><td class="mdescRight">insertMultiple  <a href="Assemble__Profile_8py.html#af9107dfd232e682ef1a23674d2c82945">More...</a><br /></td></tr>
<tr class="separator:af9107dfd232e682ef1a23674d2c82945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa495ec694c9bcae7d8d542cd6999f558"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#aa495ec694c9bcae7d8d542cd6999f558">Assemble_Profile.insertSingle</a> (table, key, val)</td></tr>
<tr class="memdesc:aa495ec694c9bcae7d8d542cd6999f558"><td class="mdescLeft">&#160;</td><td class="mdescRight">insertSingle  <a href="Assemble__Profile_8py.html#aa495ec694c9bcae7d8d542cd6999f558">More...</a><br /></td></tr>
<tr class="separator:aa495ec694c9bcae7d8d542cd6999f558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad83568c60f09c05e93a1fca164ec73ac"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#ad83568c60f09c05e93a1fca164ec73ac">Assemble_Profile.initializeDB</a> (conn, songVectors)</td></tr>
<tr class="memdesc:ad83568c60f09c05e93a1fca164ec73ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">initializeDB  <a href="Assemble__Profile_8py.html#ad83568c60f09c05e93a1fca164ec73ac">More...</a><br /></td></tr>
<tr class="separator:ad83568c60f09c05e93a1fca164ec73ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66eef1c5aa503b99c37c44e47f1167c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#af66eef1c5aa503b99c37c44e47f1167c">Assemble_Profile.updateSongsDB</a> (conn, songVectors)</td></tr>
<tr class="memdesc:af66eef1c5aa503b99c37c44e47f1167c"><td class="mdescLeft">&#160;</td><td class="mdescRight">updateSongsDB  <a href="Assemble__Profile_8py.html#af66eef1c5aa503b99c37c44e47f1167c">More...</a><br /></td></tr>
<tr class="separator:af66eef1c5aa503b99c37c44e47f1167c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a56d4476ceacdc31103204999b687d4e8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a56d4476ceacdc31103204999b687d4e8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Assemble_Profile.user</b> = config_obj.get_user()</td></tr>
<tr class="separator:a56d4476ceacdc31103204999b687d4e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6d3fa6919c16e050fc6fa72ac0ff179"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae6d3fa6919c16e050fc6fa72ac0ff179"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Assemble_Profile.localDB</b> = config_obj.get_db()</td></tr>
<tr class="separator:ae6d3fa6919c16e050fc6fa72ac0ff179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ee0af1ae6d95a1453cf3ffe3e91df56"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1ee0af1ae6d95a1453cf3ffe3e91df56"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Assemble_Profile.db_exists</b> = os.path.exists(localDB)</td></tr>
<tr class="separator:a1ee0af1ae6d95a1453cf3ffe3e91df56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd4536b98a57de8ee04c7f9dd426d6ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd4536b98a57de8ee04c7f9dd426d6ab"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Assemble__Profile_8py.html#afd4536b98a57de8ee04c7f9dd426d6ab">Assemble_Profile.labels</a> = ['artists', 'genres', 'popularity', 'acousticness', 'danceability', 'energy', 'instrumentalness', 'key', 'liveness', 'valence']</td></tr>
<tr class="memdesc:afd4536b98a57de8ee04c7f9dd426d6ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">A human-friendly list of the features in a user/song profile vector. <br /></td></tr>
<tr class="separator:afd4536b98a57de8ee04c7f9dd426d6ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59e1213a512eb40af28609700714921e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a59e1213a512eb40af28609700714921e"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><b>Assemble_Profile.scope</b> = 'user-library-read'</td></tr>
<tr class="separator:a59e1213a512eb40af28609700714921e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a861d6808ba4fc3e37f13d250dc300f30"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a861d6808ba4fc3e37f13d250dc300f30"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Assemble_Profile.songVectors</b> = getUserSongVectors(user)</td></tr>
<tr class="separator:a861d6808ba4fc3e37f13d250dc300f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac68b7ae2a10f67311444f8883e2ca2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ac68b7ae2a10f67311444f8883e2ca2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Assemble_Profile.cursor</b> = conn.execute(&quot;SELECT * FROM numerics&quot;)</td></tr>
<tr class="separator:a0ac68b7ae2a10f67311444f8883e2ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Assemble Profile script. </p>
<p>Prepares a database of song features from track objects on the user's Spotify account. First step in setting up our recommendation system.</p>
<p>This script accesses the user's account and assembles up to the first 1000 songs in their library. From each song, the features we care about are extracted and packed into an easily parsed format in "SongVectors.txt".</p>
<p>Run this script after setting up a Spotify developer account, exporting your credentials to the system path, and setting up Spotipy in a virtual Python environment. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="file_a189b709c076ae0e129e145c9ca48c580"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Assemble_Profile.dumpSongVectors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vectors</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>dumpSongVectors </p>
<p>Write a list of song vectors to file for processing/debugging </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vectors</td><td>A list of song vectors in the format produced by <a class="el" href="Assemble__Profile_8py.html#ae387154dbf34f669b9a17893f7348890" title="getVectorFromTrack ">getVectorFromTrack()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>Steps through the list of song vectors and writes each to SongVectors.txt on its own line. This file represents the "database" of known liked songs for a user, against which we can prepare a user profile and make decisions about new songs. Entries are separated by '###'. Since artists and genres are lists, they are recorded within '{{' '}}' and delimited by ',,'. For example, the list [1,2,3] would be encoded as {{1,,2,,3}} </p>

</div>
</div>
<a class="anchor" id="file_a441728fc886e5c5e0fbfabf53fd66bb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Assemble_Profile.getSongFeatures </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getSongFeatures </p>
<p>Get the track data object for each song from a list of song ids </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sp</td><td>The handle to the Spotipy wrapper associated with the current user </td></tr>
    <tr><td class="paramname">ids</td><td>A list of Spotify song ids </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A Spotify features object associated with the track</dd></dl>
<p>Fetches the full length track object for each of the songs associated with the list of ids passed in. </p>

</div>
</div>
<a class="anchor" id="file_a9fa603b181c1cddf1b3f8c2b39a1c150"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Assemble_Profile.getTracksUserAccount </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>limit</em> = <code>20</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>index</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getTracksUserAccount </p>
<p>Get the user's songs from their library </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sp</td><td>The handle to the Spotipy wrapper associated with the current user </td></tr>
    <tr><td class="paramname">limit</td><td>Optional integer representing the number of tracks to fetch </td></tr>
    <tr><td class="paramname">index</td><td>Optional integer representing the index into the user's library to begin with </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of Spotify track objects associated with songs in the user's library</dd></dl>
<p>Fetches up to limit songs from the user's saved songs library, beginning at the index indicated. </p>

</div>
</div>
<a class="anchor" id="file_af9121f3a5f7834af381ce54c15e13926"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Assemble_Profile.getUserSongVectors </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>numCalls</em> = <code>50</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>numEntries</em> = <code>20</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getUserSongVectors </p>
<p>Assembles a list of song vectors for a user </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user</td><td>The spotify username of the user to fetch songs from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of song vectors in the format produced by <a class="el" href="Assemble__Profile_8py.html#ae387154dbf34f669b9a17893f7348890" title="getVectorFromTrack ">getVectorFromTrack()</a></dd></dl>
<p>Steps through the first 100 songs of the user passed in, preparing a song vector for each and aggregating the results into a list. If the user does not have enough songs, or if some other errors are preventing the API calls from completing, the method will abandon its task after 3 failures </p>

</div>
</div>
<a class="anchor" id="file_ae387154dbf34f669b9a17893f7348890"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Assemble_Profile.getVectorFromTrack </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>sp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>artists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getVectorFromTrack </p>
<p>Assembles a vector of feature values for a track </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sp</td><td>The handle to the Spotipy wrapper associated with the current user </td></tr>
    <tr><td class="paramname">features</td><td>A Spotify feature object associated with the track in question </td></tr>
    <tr><td class="paramname">artists</td><td>A list of Spotify artist objects that are associated with the track in question </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of qualities associated with the track in question</dd></dl>
<p>A vector of features that our app cares about is assembled from the multitude of information in the Spotify objects. The features passed in include a number of qualities curated by Spotify to classify a song with. The artist(s) that are associated with the song in question each provide contributions to a list of artist names, a list of genres, and an integer representing overall popularity rating. This popularity is averaged (to account for weird collaborations). </p>

</div>
</div>
<a class="anchor" id="file_ad83568c60f09c05e93a1fca164ec73ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Assemble_Profile.initializeDB </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>songVectors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initializeDB </p>
<p>Set up and populate a database of song vectors from the user's library </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>A SQLite3 connection object attached to an open database file </td></tr>
    <tr><td class="paramname">songVectors</td><td>A list of song vectors to be added to the new database </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This method is responsible for creating a local database with tables to store song feature vectors, artists, genres, standard deviations, and user profile values. It is assumed that the tables do not already exist. </p><pre class="fragment">Schema
    numerics   - rows represent individual songs, columns are numeric features associated with the songs
    artists    - rows represent unique artist strings
    genres     - rows represent unique genre strings
    profile    - rows represent the average value of each column in numerics
    deviations - rows represent the standard deviation of each column in numerics
    weight     - single row, columns represent the weight of each of the 10 features, composed of
             artists, genres, popularity, acousticness, danceability, energy, instrumentalness, key, liveness, and valence</pre> 
</div>
</div>
<a class="anchor" id="file_af9107dfd232e682ef1a23674d2c82945"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Assemble_Profile.insertMultiple </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vals</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>insertMultiple </p>
<p>Prep an insert SQL query for multipe matched key-value pairs </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>A string representing the name of the table for the query </td></tr>
    <tr><td class="paramname">keys</td><td>A list of strings representing column names within the table </td></tr>
    <tr><td class="paramname">vals</td><td>A list of values corresponding to the columns passed in </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of strings representing SQL insert queries using the keys and values passed in</dd></dl>
<p>This method prepares strings for SQL insert queries. It is assumed that the keys and values are aligned. </p>

</div>
</div>
<a class="anchor" id="file_aa495ec694c9bcae7d8d542cd6999f558"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Assemble_Profile.insertSingle </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>insertSingle </p>
<p>Prep an insert query for a single key-value pair </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">table</td><td>A string representing the name of the table for the query </td></tr>
    <tr><td class="paramname">keys</td><td>A list of strings representing column names within the table </td></tr>
    <tr><td class="paramname">vals</td><td>A list of values corresponding to the columns passed in </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A string representing a SQL insert query using the keys and values passed in</dd></dl>
<p>This method prepares a string for a SQL insert query. It is assumed that the keys and values are aligned. </p>

</div>
</div>
<a class="anchor" id="file_af66eef1c5aa503b99c37c44e47f1167c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Assemble_Profile.updateSongsDB </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>songVectors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>updateSongsDB </p>
<p>Adds new songs in the user's library to the database, skipping over duplicates. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn,a</td><td>handle into a SQLite3 local database </td></tr>
    <tr><td class="paramname">songVectors</td><td>A list comprised of song vectors, of the form [[artists:string], [genres:string], 10*float] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This method is responsible for updating a user's library in the local database. This method is inefficient, but the alternative is manually checking that each song locally is in the user's tracks, resulting in an API call for each (much worse). songVectors are assumed to be in the proper format </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
